{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'polls/style.css' %}">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Vollkorn&display=swap" rel="stylesheet">

<h1 class="title">{{ question.question_text }}</h1>
<div class="the-card">
    <div>
        <ul>
            {% for choice in question.choice_set.all %}
            <li class="option">{{ choice.choice_text }} ðŸ‘‰ {{ choice.votes }} vote{{ choice.votes|pluralize }}</li>
            {% endfor %}
        </ul>

        <div style="display: flex; margin-left: 10px; justify-content: space-between;  width: 350px ">
            <a href="{% url 'polls:detail' question.id %}">
                <button class="the-button">
                    Vote Again
                </button>
            </a>
            </br>
            <a href="{% url 'polls:index' %}"><button class="the-button">
                    Back to Home
                </button></a>
        </div>

    </div>
    <div>
        <canvas id="myChart" width="400" height="400"></canvas>
    </div>
</div>

<script>
    var text = [];
    var vote = []
    {% for choice in question.choice_set.all %}
    text.push("{{choice.choice_text}}")
    vote.push("{{choice.votes}}")
    {% endfor %}

    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: text,
            datasets: [{
                label: '# of Votes',
                data: vote,
                backgroundColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',

                ],
                borderColor: [
                    'rgba(255, 255, 255, 1)',
                    'rgba(255, 255, 255, 1)',
                    'rgba(255, 255, 255, 1)',
                ],
                borderWidth: 3
            }]
        },

    });
</script>